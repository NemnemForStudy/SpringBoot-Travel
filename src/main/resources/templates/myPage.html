<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>제목은 미정. 여행 사이트</title>
    
        <!--    Bootstrap의 css 스타일을 불러오는 코드. Bootstrap이 제공하는 디자인을 사용하려면 필요함. 모던하고 반응형으로 만들어줌.    -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">
        <!-- 햄버거 버튼 사용위해 있어야함. -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
    
        <style>
            #profilePreview {
                border-radius: 50%;  /* 원형으로 만듦 */
                overflow: hidden;    /* 이미지가 부모 요소 밖으로 나가지 않게 함 */
            }
            #profilePreview img {
                width: 100%;         /* 부모 요소에 맞게 이미지 크기 조정 */
                height: 100%;        /* 부모 요소에 맞게 이미지 크기 조정 */
                object-fit: cover;   /* 이미지 잘라내기 */
            }

            /* Profile details */
            .profile-details {
                font-size: 18px;
            }

            .profile-details h4 {
                margin-bottom: 10px;
            }

            .profile-details p {
                color: gray;
            }
        </style>
    </head>

<nav class="navbar navbar-expand-lg navbar-dark bg-primary">
    <div class="container-fluid">
        <!-- d-block : 인라인 요소를 block 으로 바꿔줌, text-center : 텍스트 가운데로 -->
        <div class="container d-flex justify-content-center">
            <a class="navbar-brand">마이페이지</a>
        </div>
        <div class="justify-content-md-end">
            <a class="btn btn-primary" href="/" role="button">메인화면</a>
        </div>
        <div class="justify-content-md-end">
            <a class="btn btn-primary" href="/logout" role="button">로그아웃</a>
        </div>

        <!-- 햄버거 버튼 -->
        <button class="btn btn-primary" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasRight"
        aria-controls="offcanvasRight">
    <span class="navbar-toggler-icon"></span>
</button>

<!-- 오프캔버스 오른쪽 메뉴 -->
<div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasRight" aria-labelledby="offcanvasRightLabel">
    <div class="offcanvas-header">
        <h5 class="offcanvas-title" id="offcanvasRightLabel">메뉴</h5>
        <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas"
                aria-label="Close"></button>
    </div>
    <div class="offcanvas-body">
        <ul class="list-group">
            <li class="list-group-item"><a href="/">홈</a></li>
            <li class="list-group-item"><a href="/travelDestination">여행지</a></li>
            <li class="list-group-item"><a href="#">예약</a></li>
        </ul>
    </div>
</div>
    </div>
</nav>

<body>
<div style="display: flex; justify-content: center; align-items: center; gap: 80px; position: relative;">
    <!-- 연필 아이콘 -->
    <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25"
         fill="currentColor" class="bi bi-pencil-square"
         viewBox="0 0 16 16"
         style="position: absolute; top: 20%; left: 45%; background: white; cursor: pointer;"
         id="editIcon">
        <path d="M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"/>
        <path fill-rule="evenodd"
              d="M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5z"/>
    </svg>

    <!-- 이미지 미리보기 영역 -->
    <div id="profilePreview" class="rounded-circle border border-secondary d-flex align-items-center justify-content-center"
         style="width: 250px; height: 250px; margin: 100px; position: relative;">
        <div style="pointer-events: none;">
            <svg id="profileIcon" xmlns="http://www.w3.org/2000/svg"
                 width="250" height="250" fill="gray"
                 class="bi bi-person-circle" viewBox="0 0 16 16">
                <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0"/>
                <path fill-rule="evenodd"
                      d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8
                     m8-7a7 7 0 0 0-5.468 11.37
                     C3.242 11.226 4.805 10 8 10
                     s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1"/>
            </svg>
        </div>
    </div>

    <!-- 숨겨진 파일 업로드 input -->
    <input type="file" id="profileUpload" accept="image/*" style="display: none;" />

    <!-- 오른쪽: 유저 정보 + 버튼 -->
    <div style="display: flex; flex-direction: column; justify-content: space-between; height: 250px;">
        <div class="profile-details" style="margin-top: 50px">
            <h4>아이디 : <span th:text="${user.email}"></span></h4>
            <h4 id="nicknameDisplay">닉네임 : <span id="nicknameValue" th:text="${user.nickname}"></span>
                <input type="text" id="nicknameInput" style="display: none;"/>
            </h4>
            <h4>전화번호 : <span th:text="${user.phoneNumber}"></span></h4>
        </div>

        <!-- 안쪽 요소를 오른쪽 끝으로 정렬할 때 사용하는 방법. -->
        <div class="d-flex justify-content-end mt-3" style="gap: 10px;">
            <button id="editBtn" class="btn btn-primary">수정</button>
            <button id="saveBtn" class="btn btn-primary" style="display: none;">확인</button>
        </div>
        
    </div>
</div>
<script src="/js/changeProfile.js"></script>
<script src="/js/updateNickname.js"></script>
</body>
</html>